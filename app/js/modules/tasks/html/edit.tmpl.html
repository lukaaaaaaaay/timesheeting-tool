<div class="container-fluid">
    <div class="row">
        <div class="col-sm-8">
            <h3 class="page-heading teal">Edit Task</h3>
            <form name="task" class="form-horizontal" novalidate>

                <div class="form-group">
                    <div class="col-sm-3 text-right">
                        <label class="control-label">Task Name</label>
                    </div>
                    <div class="col-sm-9">
                        <input type="text" class="form-control" name="taskName" ng-model="task.name" required/>
                        <div class="error" 
                            ng-show="(task.taskName.$dirty && task.taskName.$invalid) 
                                        || (submitted && task.taskName.$invalid)" >
                            <span ng-show="task.taskName.$error.required">
                              The task name is required!
                            </span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-3 text-right">
                        <label class="control-label">Start Date</label>
                    </div>
                    <div class="col-sm-3">
                        <input type="date" 
                                class="form-control" 
                                name="startDate" 
                                ng-model="task.startDate" 
                                required 
                                ng-change="validateDate(task, task.startDate, task.dueDate)"/>
                        <div class="error" 
                            ng-show="(task.startDate.$dirty && task.startDate.$invalid) || (submitted && task.startDate.$invalid)" >
                            <span ng-show="task.startDate.$error.required">
                              The task start date is required!
                            </span>
                        </div>
                    </div>

                    <div class="col-sm-2">
                        <label class="control-label">Due Date</label>
                    </div>
                    <div class="col-sm-3">
                        <input type="date" 
                                class="form-control" 
                                name="dueDate" 
                                ng-model="task.dueDate" 
                                ng-change="validateDate(task, task.startDate, task.dueDate)"/>
<!--                        <div class="error" ng-show="task.dueDate.$dirty && task.dueDate.$invalid" >
                            <span ng-show="task.dueDate.$error.required">
                              The task due date is required!
                            </span>
                        </div> -->
                    </div>
                    <div class="col-sm-9 col-sm-offset-3 error" ng-show="(task.startDate.$dirty && task.taskName.$invalid) 
                                                && (task.dueDate.$dirty && task.dueDate.$invalid)" >
                        <span ng-show="task.startDate.$error.invalidDate && task.dueDate.$error.invalidDate">
                          The due date must be greater than the start date.
                        </span>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-3 text-right">
                        <label class="control-label">Projects</label>
                    </div>
                    <div class="col-sm-4">
                        <select class="form-control" name="project" ng-model="task.projectId" 
                                ng-options="project.id as project.name for project in allProjects" required>
                            <option value="">Please select..</option>
                        </select>
                        <div class="error" 
                                ng-show="(task.project.$dirty && task.project.$invalid) 
                                            || (submitted && task.project.$invalid)" >
                            <span ng-show="task.project.$error.required">
                              You must select a project!
                            </span>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-sm-3 text-right">
                        <label class="control-label">Status</label>
                    </div>
                    <div class="col-sm-4">
                        <select class="form-control" name="status" ng-model="task.statusId" 
                                ng-options="status.id as status.name for status in statuses" required>
                            <option value="">Please select..</option>
                        </select>
                        <div class="error" 
                                ng-show="(task.status.$dirty && task.status.$invalid) 
                                            || (submitted && task.status.$invalid)" >
                            <span ng-show="task.status.$error.required">
                              You must select a task status!
                            </span>
                        </div>
                    </div>
                </div>
                <!-- TODO: Show a dropdown of staff -->
                <!-- <div class="form-group">
                    <div class="col-sm-3 text-right">
                        <label class="control-label">Project Manager</label>
                    </div>
                    <div class="col-sm-4">
                        <select class="form-control" name="projectManager" ng-model="project.projectManagerId" 
                                ng-options="item.id as item.fullName for item in managers" required>
                            <option value="">Please select..</option>
                        </select>
                        <div class="error" ng-show="(createProjectForm.projectManager.$dirty && createProjectForm.projectManager.$invalid) || (submitted && createProjectForm.projectManager.$invalid)" >
                            <span ng-show="createProjectForm.projectManager.$error.required">
                              You must assign a project manager!
                            </span>
                        </div>
                    </div>
                </div> -->
                <div class="form-group">
                    <div class="col-sm-3 text-right">
                        <label class="control-label">Description</label>
                    </div>
                    <div class="col-sm-9">
                        <textarea class="form-control" name="description" ng-model="task.description"></textarea> 
                    </div>
                </div>
                <div class="col-sm-12 text-right form-buttons">
                    <button type="button" class="btn btn-primary" ng-click="updateTask(task)"><i class="fa fa-check"></i> Save</button>
                </div>                              
            </form>
        </div>
    </div>
</div>